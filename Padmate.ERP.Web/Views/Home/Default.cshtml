@using Padmate.ERP.Models;
@using Padmate.ERP.Utility;
@{
    Layout = "~/Views/Shared/_DefaultLayout.cshtml";
    var user = Session[Common.SessionLoginUser] != null ? (M_User)Session[Common.SessionLoginUser] : null;
    
}
<link rel="stylesheet" href="~/Content/login.css">
<script src="~/Scripts/sha256.js"></script>
<script src="~/Scripts/jquery.base64.js"></script>


@if (user != null)
{
    <div class="login">
        <h1>你好，</h1>
        <h1>@user.UserName</h1>

        <a href="/Home/Index" class="btn btn-danger">进入系统</a>
        @using (Html.BeginForm("SignOut", "Account", FormMethod.Post, new { id = "logoutForm" }))
        {
            <a href="javascript:document.getElementById('logoutForm').submit()" class="btn btn-default">注销</a>

        }
    </div>
}
else
{
    <form id="formLogin" action="/Account/Login" class="login" enctype="multipart/form-data">
        <h1>登录系统</h1>
        <label id="errormessage" class="login-message"></label>
        <input type="text" id="username" name="UserName" class="login-input" placeholder="用户名" autofocus>
        <input type="password" id="password" name="Password" class="login-input" placeholder="密码">
        <input type="submit" value="登 录" class="login-submit">
        <p class="login-help"><a href="#">忘记密码?</a></p>
    </form>
}



<div class="news-section">
    <div class="container">
        <div class="row scrollnews">
            <div class="col-is-12 col-xs-12 col-sm-1 col-md-1">
                <img class="img-responsive" src="~/images/news.png" />
            </div>
            <div class="col-is-12 col-xs-12 col-sm-9 col-md-9">

                <div id="scrollDiv">
                    <ul class="customer-content-md">
                        <li>
                            [<a href='http://www.51xuediannao.com/js/texiao/'>网页特效</a>] <a href="http://www.51xuediannao.com/js/texiao/642.html" title="为网站增加圣诞节祝福动画百度的圣诞老人动画" class="linktit">为网站增加圣诞节祝福动画百度的圣诞老人动画</a>
                        </li>
                        <li>[<a href='http://www.51xuediannao.com/yumenba/'>郁闷吧</a>] <a href="http://www.51xuediannao.com/yumenba/606.html" title="2011最简单最给力的兼职网赚项目" class="linktit">2011最简单最给力的兼职网赚项目</a></li>
                        <li>[<a href='http://www.51xuediannao.com/yumenba/'>郁闷吧</a>] <a href="http://www.51xuediannao.com/yumenba/yuwangmen_heti.html" title="90后富家二小姐渔网妹欲造合体门(多图)" class="linktit">90后富家二小姐渔网妹欲造合体门(多图)</a></li>
                        <li>[<a href='http://www.51xuediannao.com/yumenba/'>郁闷吧</a>] <a href="http://www.51xuediannao.com/yumenba/google.html" title="关于谷歌中国的最新声明(来自谷歌)" class="linktit">关于谷歌中国的最新声明(来自谷歌)</a></li>
                        <li>[<a href='http://www.51xuediannao.com/jiqiao/'>建站技巧</a>] <a href="http://www.51xuediannao.com/jiqiao/chuangyi.html" title="设计创意究竟是怎么练出来的？" class="linktit">设计创意究竟是怎么练出来的？</a></li>
                        <li>[<a href='http://www.51xuediannao.com/weike/'>威客网排行榜</a>] <a href="http://www.51xuediannao.com/weike/weike_daxuesheng.html" title="大三学生做威客一边学习一边赚生活费" class="linktit">大三学生做威客一边学习一边赚生活费</a></li>
                        <li>[<a href='http://www.51xuediannao.com/js/texiao/'>网页特效</a>] <a href="http://www.51xuediannao.com/js/texiao/js-riqi.html" title="日期时间带星期农历js代码特效" class="linktit">日期时间带星期农历js代码特效</a></li>
                        <li>[<a href='http://www.51xuediannao.com/html+css/htmlcssjq/'>html+css技巧</a>] <a href="http://www.51xuediannao.com/html+css/htmlcssjq/IE6 min.html" title="IE6最小高度最小宽度最大高度最大宽度css写法" class="linktit">IE6最小高度最小宽度最大高度最大宽度css写法</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-is-12 col-xs-12 col-sm-2 col-md-2">
                <div class="scrollbox">
                    <small id="but_up">↑上一条</small>
                    <small id="but_down">↓下一条</small>
                </div>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-4 col-sm-4 highlight">
                <div class="service-box">
                    <a href="" class="information-box">
                        <img class="img-responsive" src="~/images/small_model.jpg" />
                    </a>
                    <div class="service-information-caption">
                        <h4 class="customer-h4">
                            新闻资讯
                        </h4>
                        <span class="customer-content-sm">
                            Lorem ipsum dolor sit amet
                            Lorem ipsum dolor sit amet

                        </span>
                    </div>

                </div>
            </div>
            <div class="col-md-4 col-sm-4 highlight">
                <div class="service-box">
                    <a href="" class="information-box">
                        <img class="img-responsive" src="~/images/small_model.jpg" />
                    </a>
                    <div class="service-information-caption">
                        <h4 class="customer-h4">
                            新闻资讯
                        </h4>
                        <span class="customer-content-sm">
                            Lorem ipsum dolor sit amet
                            Lorem ipsum dolor sit amet

                        </span>
                    </div>

                </div>
            </div>
            <div class="col-md-4 col-sm-4 highlight">
                <div class="service-box">
                    <a href="" class="information-box">
                        <img class="img-responsive" src="~/images/small_model.jpg" />
                    </a>
                    <div class="service-information-caption">
                        <h4 class="customer-h4">
                            新闻资讯
                        </h4>
                        <span class="customer-content-sm">
                            Lorem ipsum dolor sit amet
                            Lorem ipsum dolor sit amet

                        </span>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>
<!-- Intro -->
<!-- /Intro-->
<!-- Highlights - jumbotron -->
<div class="jumbotron top-space">
    <div class="container">

        <h3 class="text-center thin">模块标题</h3>

        <div class="row">
            <div class="col-md-3 col-sm-6 highlight feature">
                <div class="h-caption"><h4><i class="fa fa-cogs fa-5"></i>自动化制造</h4></div>
                <div class="h-body text-center">
                    <p>
                        文字介绍文字介绍文字介绍文字介绍
                        文字介绍文字介绍文字介绍文字介绍
                    </p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 highlight feature">
                <div class="h-caption"><h4><i class="fa fa-flash fa-5"></i>智能硬件</h4></div>
                <div class="h-body text-center">
                    <p>
                        文字介绍文字介绍文字介绍文字介绍
                        文字介绍文字介绍文字介绍文字介绍
                    </p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 highlight feature">
                <div class="h-caption"><h4><i class="fa fa-heart fa-5"></i>华尔达精密</h4></div>
                <div class="h-body text-center">
                    <p>
                        文字介绍文字介绍文字介绍文字介绍
                        文字介绍文字介绍文字介绍文字介绍
                    </p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 highlight feature">
                <div class="h-caption"><h4><i class="fa fa-send fa-5"></i>SVV加速</h4></div>
                <div class="h-body text-center">
                    <p>
                        文字介绍文字介绍文字介绍文字介绍
                        文字介绍文字介绍文字介绍文字介绍
                    </p>
                </div>
            </div>
        </div> <!-- /row  -->

    </div>
</div>
<!-- /Highlights -->
<!-- container -->
<div class="container">

    <h2 class="text-center top-space">为什么选择华尔达</h2>
    <br>

    <div class="row">
        <div class="col-sm-6">
            <h3>Which code editor would you recommend?</h3>
            <p>I'd highly recommend you <a href="http://www.sublimetext.com/">Sublime Text</a> - a free to try text editor which I'm using daily. Awesome tool!</p>
        </div>
        <div class="col-sm-6">
            <h3>Nice header. Where do I find more images like that one?</h3>
            <p>
                Well, there are thousands of stock art galleries, but personally,
                I prefer to use photos from these sites: <a href="http://unsplash.com">Unsplash.com</a>
                and <a href="http://www.flickr.com/creativecommons/by-2.0/tags/">Flickr - Creative Commons</a>
            </p>
        </div>
    </div> <!-- /row -->

    <div class="row">
        <div class="col-sm-6">
            <h3>Can I use it to build a site for my client?</h3>
            <p>
                Yes, you can. You may use this template for any purpose, just don't forget about the <a href="http://creativecommons.org/licenses/by/3.0/">license</a>,
                which says: "You must give appropriate credit", i.e. you must provide the name of the creator and a link to the original template in your work.
            </p>
        </div>
        <div class="col-sm-6">
            <h3>Can you customize this template for me?</h3>
            <p>Yes, I can. Please drop me a line to sergey-at-pozhilov.com and describe your needs in details. Please note, my services are not cheap.</p>
        </div>
    </div> <!-- /row -->


</div>	<!-- /container -->

<script>
    $(function () {
        InitCarousel();
        ScrollNews();

        $(".feature").hover(function () {
            $(this).find("i").addClass("fa-spin");
        }, function () {
            $(this).find("i").removeClass("fa-spin");
        });

        var options = {
            type: "POST",
            url: "/Account/Login",
            dataType: "json",
            beforeSubmit: showRequest,
            success: showResponse
        };
        $('#formLogin').ajaxForm(options);

    });
    //初始化轮播图片
    function InitCarousel() {
        $('#headbg-img').carousel({
            interval: 6000,
            pause: 'cycle'
        });
    }

    //新闻滚动
    function ScrollNews()
    {
        $("#scrollDiv").Scroll({
            line: 1,
            speed: 500,
            timer: 3000,
            up: "but_up",
            down: "but_down"
        });
    }


    function showRequest(formData, jqForm, options) {
        //密码进行hash加密
        var username = $("#username").val();
        var password = $("#password").val();
        if(username == null || username =="")
        {
            $("#errormessage").html("请输入用户名");
            //防止普通表单提交action
            return false;
        }
        if (password == null || password == "") {
            $("#errormessage").html("请输入密码");
            return false;
        }

        var clientSalt = username + '@Common.Password_Client_Salt';
        var hashPassword = sha256_digest(password +clientSalt);
        
        var base64Hash = $.base64.btoa(hashPassword);
        
        $("#password").val(base64Hash);

    }

    //
    function showResponse(message) {
        if (message.Success) {
            window.location.href = "/Home/Index";

        } else {
            $("#errormessage").html(message.Content);
        }
    }

</script>